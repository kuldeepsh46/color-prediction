!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t);function a(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x1-c,d=o*n.coordinates.y1-c,l=r*n.coordinates.x1+c,u=o*n.coordinates.y1+c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function c(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x2-c,d=o*n.coordinates.y1-c,l=r*n.coordinates.x2+c,u=o*n.coordinates.y1+c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function s(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x2-c,d=o*n.coordinates.y2-c,l=r*n.coordinates.x2+c,u=o*n.coordinates.y2+c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function d(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x1-c,d=o*n.coordinates.y2-c,l=r*n.coordinates.x1+c,u=o*n.coordinates.y2+c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function l(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x1+c,d=o*n.coordinates.y1-c,l=r*n.coordinates.x2-c,u=o*n.coordinates.y1+c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function u(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x1+c,d=o*n.coordinates.y2-c,l=r*n.coordinates.x2-c,u=o*n.coordinates.y2+c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function m(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x1-c,d=o*n.coordinates.y1+c,l=r*n.coordinates.x1+c,u=o*n.coordinates.y2-c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function f(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x2-c,d=o*n.coordinates.y1+c,l=r*n.coordinates.x2+c,u=o*n.coordinates.y2-c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function y(e,t,r,o,n,i,a){var c=5*i,s=r*n.coordinates.x1+c,d=o*n.coordinates.y1+c,l=r*n.coordinates.x2-c,u=o*n.coordinates.y2-c;return e/a>=s&&e/a<=l&&t/a>=d&&t/a<=u}function h(e,t,r,o,n,i,h){return a(e,t,r,o,n,i,h)?"cursor-nw-resize":c(e,t,r,o,n,i,h)?"cursor-ne-resize":s(e,t,r,o,n,i,h)?"cursor-nw-resize":d(e,t,r,o,n,i,h)?"cursor-ne-resize":l(e,t,r,o,n,i,h)?"cursor-n-resize":u(e,t,r,o,n,i,h)?"cursor-s-resize":m(e,t,r,o,n,i,h)?"cursor-w-resize":f(e,t,r,o,n,i,h)?"cursor-e-resize":y(e,t,r,o,n,i,h)?"cursor-move":null}function v(e,t,r,o,i,h,v,g){return a(e,t,r,o,i,v,g)?{itemId:h,area:"top-left",startX:e,startY:t,coordinates:n({},i.coordinates)}:c(e,t,r,o,i,v,g)?{itemId:h,area:"top-right",startX:e,startY:t,coordinates:n({},i.coordinates)}:s(e,t,r,o,i,v,g)?{itemId:h,area:"bottom-right",startX:e,startY:t,coordinates:n({},i.coordinates)}:d(e,t,r,o,i,v,g)?{itemId:h,area:"bottom-left",startX:e,startY:t,coordinates:n({},i.coordinates)}:l(e,t,r,o,i,v,g)?{itemId:h,area:"top",startX:e,startY:t,coordinates:n({},i.coordinates)}:u(e,t,r,o,i,v,g)?{itemId:h,area:"bottom",startX:e,startY:t,coordinates:n({},i.coordinates)}:m(e,t,r,o,i,v,g)?{itemId:h,area:"left",startX:e,startY:t,coordinates:n({},i.coordinates)}:f(e,t,r,o,i,v,g)?{itemId:h,area:"right",startX:e,startY:t,coordinates:n({},i.coordinates)}:y(e,t,r,o,i,v,g)?{itemId:h,area:"inside",startX:e,startY:t,coordinates:n({},i.coordinates)}:null}function g(e,t,r){var o=t.getBoundingClientRect();return{x:Math.round((e.clientX-o.left)*r),y:Math.round((e.clientY-o.top)*r)}}function I(e,t,r){return{width:t*(e.coordinates.x2-e.coordinates.x1),height:r*(e.coordinates.y2-e.coordinates.y1),x:t*e.coordinates.x1,y:r*e.coordinates.y1}}function b(e,t,r,o,n,i){var a=!1===i.enableRotation?0:i["".concat(t,"ImgRotation")];!function(e,t,r,o,n,i){if(!function(e){return e.naturalWidth>0}(n))return;var a=I(e,r,o);!function(e,t,r,o,n,i,a){e.save(),e.translate(r+n/2,o+i/2),e.rotate(t),e.drawImage(a,-n/2,-i/2,n,i),e.restore()}(t,i,a.x,a.y,a.width,a.height,n)}(e,r,o,n,i[t],a)}function x(e,t,r,o,n){t.fillStyle="rgba(255, 50, 50, "+n+")",function(e,t,r,o){var n=I(e,r,o);t.fillRect(Math.round(n.x),Math.round(n.y),Math.round(n.width),Math.round(n.height))}(e,t,r,o)}function p(e,t,r,o,n,i){t.strokeStyle="rgba(180, 255, 180, "+n+")",t.lineWidth=i,function(e,t,r,o){var n=I(e,r,o);t.strokeRect(Math.round(n.x)+1,Math.round(n.y)+1,Math.round(n.width)-2,Math.round(n.height)-2)}(e,t,r,o)}function L(e,t,r,o,n,i,a,c){if(t.clearRect(0,0,r,o),!0!==n.enableLayer||"item"!==i&&"itemWithBorder"!==i)t.drawImage(n.vehicle,0,0,r,o),"item"===i?(w(n.item1.src)&&(b(e[0],"item1",t,r,o,n),"itemWithBorder"===i&&p(e[0],t,r,o,a,c)),w(n.item2.src)&&(b(e[1],"item2",t,r,o,n),"itemWithBorder"===i&&p(e[0],t,r,o,a,c))):"rect"===i?(w(n.item1.src)&&x(e[0],t,r,o,a),w(n.item2.src)&&x(e[1],t,r,o,a)):"border"===i&&(w(n.item1.src)&&p(e[0],t,r,o,a,c),w(n.item2.src)&&p(e[1],t,r,o,a,c));else{var s=function(e){for(var t={},r=[],o=1;o<3;o++){if(null===e["item".concat(o,"ImgLayer")])return void console.error("Set Layer for Item".concat(o,". Current value is NULL"));var n=e["item".concat(o,"ImgLayer")]+e.vehicleLayer;if(t[n]="item".concat(o),r.includes(n))return void console.error("Layer already taked by other item");r.push(n)}return t[e.vehicleLayer]="vehicle",t}(n);for(var d in s){var l=s[d];if("vehicle"===l){var u=r*n.vehicleScale,m=o*n.vehicleScale;t.drawImage(n.vehicle,(r-u)/2,(o-m)/2,u,o*n.vehicleScale)}else if(w(n[l].src)){t.globalAlpha=a;var f=e[parseInt(l.replace("item",""))-1];b(f,l,t,r,o,n),"itemWithBorder"===i&&p(f,t,r,o,a,c),t.globalAlpha=1}}}}function w(e){return""!=e&&e!=location.href&&e!=location.origin&&e!=location.origin+"/"}function O(e,t,r,o){o(!R(t)),function(e,t,r,o){if(e.vehicleLoaded)return;e.vehicle=new Image,e.vehicle.src=r,e.vehicle.onload=function(){e.vehicleLoaded=!0,P(e,t,o)}}(t,r,t.vehicleImgUrl,o),j(t,"item1","item1Loaded",r,t.item1ImgUrl,o),j(t,"item2","item2Loaded",r,t.item2ImgUrl,o)}function j(e,t,r,o,n,i){e[r]||(e[t]=new Image,e[t].src=n,e[t].onload=function(){e[r]=!0,P(e,o,i)},e[t].onerror=function(){e[r]=!0,P(e,o,i)})}function P(e,t,r){R(e)&&(r(!1),t())}function R(e){return e.vehicleLoaded&&e.item1Loaded&&e.item2Loaded}function M(e,t,r,o,n,i,a,c,s,d,l,u,m){var f=g(e,o,d);n.classList.remove("cursor-n-resize","cursor-s-resize","cursor-nw-resize","cursor-ne-resize","cursor-e-resize","cursor-w-resize","cursor-move");var y=null;m().includes(0)&&(y=1),!y&&m().includes(1)&&(y=0);var v=function(e,t,r,o,n,i,a){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return 1===c||0===c?h(e,t,r,o,n[c],i,a):h(e,t,r,o,n[1],i,a)||h(e,t,r,o,n[0],i,a)}(f.x,f.y,i,a,t,d,l,y);null!==v&&n.classList.add(v),null!==r&&null!==r.itemId&&r.area&&!m().includes(r.itemId)&&("top-left"===r.area?(t[r.itemId].coordinates.x1=r.coordinates.x1-(r.startX-f.x)*c/l,t[r.itemId].coordinates.y1=r.coordinates.y1-(r.startY-f.y)*s/l):"top-right"===r.area?(t[r.itemId].coordinates.x2=r.coordinates.x2-(r.startX-f.x)*c/l,t[r.itemId].coordinates.y1=r.coordinates.y1-(r.startY-f.y)*s/l):"bottom-right"===r.area?(t[r.itemId].coordinates.x2=r.coordinates.x2-(r.startX-f.x)*c/l,t[r.itemId].coordinates.y2=r.coordinates.y2-(r.startY-f.y)*s/l):"bottom-left"===r.area?(t[r.itemId].coordinates.x1=r.coordinates.x1-(r.startX-f.x)*c/l,t[r.itemId].coordinates.y2=r.coordinates.y2-(r.startY-f.y)*s/l):"top"===r.area?t[r.itemId].coordinates.y1=r.coordinates.y1-(r.startY-f.y)*s/l:"bottom"===r.area?t[r.itemId].coordinates.y2=r.coordinates.y2-(r.startY-f.y)*s/l:"left"===r.area?t[r.itemId].coordinates.x1=r.coordinates.x1-(r.startX-f.x)*c/l:"right"===r.area?t[r.itemId].coordinates.x2=r.coordinates.x2-(r.startX-f.x)*c/l:"inside"===r.area&&(t[r.itemId].coordinates.x1=r.coordinates.x1-(r.startX-f.x)*c/l,t[r.itemId].coordinates.x2=r.coordinates.x2-(r.startX-f.x)*c/l,t[r.itemId].coordinates.y1=r.coordinates.y1-(r.startY-f.y)*s/l,t[r.itemId].coordinates.y2=r.coordinates.y2-(r.startY-f.y)*s/l),window.requestAnimationFrame(u))}function S(e,t,r){var o=e[t];e[t]=e[r],e[r]=o}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z,U=document.createElement("canvas"),C=window.devicePixelRatio>1?2:1,W=null,D=0,_=0,A="item",B=1,k=0,N=0,T={itemId:null},V=1,q={vehicleImgUrl:null,vehicleScale:1,item1ImgUrl:null,item2ImgUrl:null,vehicle:new Image,item1:new Image,item2:new Image,vehicleLoaded:!1,item1Loaded:!1,item2Loaded:!1,enableRotation:!0,item1ImgRotation:Math.PI/180*2,item2ImgRotation:Math.PI/180,enableLayer:!1,vehicleLayer:128,item1ImgLayer:null,item2ImgLayer:null},F=[{coordinates:{},originalCoordinates:{}},{coordinates:{},originalCoordinates:{}}];function Z(e){e<1||e>4||(V=e,U.style.width=Math.round(1e3*V)/10+"%",z.scrollLeft=(z.scrollWidth-z.offsetWidth)/2)}function G(e){q.vehicleImgUrl!==e&&(q.vehicleImgUrl=e,q.vehicleLoaded=!1)}function H(e){e>1||e<0||!e?console.error("Vehicle Scale must be more than 0 and less or equals to 1"):q.vehicleScale!==e&&(q.vehicleScale=e,q.vehicleLoaded=!1)}function J(e){q.enableRotation&&q.item1ImgRotation!==e&&q.item1ImgRotation}function K(e){q.enableRotation&&q.item2ImgRotation!==e&&q.item2ImgRotation}function Q(e){0===Math.round(e)||e>q.vehicleLayer?console.error("Layer for ITEM 1 should be more or less than 0, and not more than ".concat(q.vehicleLayer)):q.enableLayer&&q.item1ImgLayer!==e&&(q.item1ImgLayer=e,q.item1Loaded=!1)}function $(e){0===Math.round(e)||e>q.vehicleLayer?console.error("Layer for ITEM 2 should be more or less than 0, and not more than ".concat(q.vehicleLayer)):q.enableLayer&&q.item2ImgLayer!==e&&(q.item2ImgLayer=e,q.item2Loaded=!1)}function ee(e){q.item1ImgUrl!==e&&(q.item1ImgUrl=e,q.item1Loaded=!1)}function te(e){q.item2ImgUrl!==e&&(q.item2ImgUrl=e,q.item2Loaded=!1)}function re(){var e=[];return oe(q.item1.src)||e.push(0),oe(q.item2.src)||e.push(1),e}function oe(e){return""!=e&&e!=location.href&&e!=location.origin&&e!=location.origin+"/"}function ne(){return[Y({},F[0].coordinates),Y({},F[1].coordinates)]}function ie(e){for(var t=0,r=[0,1];t<r.length;t++){var o=r[t];F[o].coordinates={x1:+e[o].x1,y1:+e[o].y1,x2:+e[o].x2,y2:+e[o].y2},F[o].originalCoordinates={x1:+e[o].x1,y1:+e[o].y1,x2:+e[o].x2,y2:+e[o].y2}}}function ae(){for(var e=0,t=[0,1];e<t.length;e++)for(var r=t[e],o=0,n=["x1","y1","x2","y2"];o<n.length;o++){var i=n[o];if(!(F[r].coordinates[i]==F[r].originalCoordinates[i]||isNaN(F[r].coordinates[i])&&isNaN(F[r].originalCoordinates[i])))return!0}return!1}function ce(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(z.style.transition="filter .33s, opacity .33s",z.style.filter="blur(5px) grayscale(1)",z.style.opacity=".5"):(z.style.filter="",z.style.opacity="1")}function se(e){A=e}function de(e){B=e}function le(){q.vehicleLoaded&&q.item1Loaded&&q.item2Loaded&&window.requestAnimationFrame((function(){L(F,W,D,_,q,A,B,C)}))}function ue(){O(0,q,le,ce)}function me(){D!==z.clientWidth*C&&(D=z.clientWidth*C,_=D*(1200/2300),U.width=D,U.height=_,k=U.width>0?1/U.width:0,N=U.height>0?1/U.height:0,le())}function fe(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};z=document.getElementById(null!==(e=t.elId)&&void 0!==e?e:"as_visualizer"),!1===t.enableRotation&&(q.enableRotation=!1),!0===t.enableLayer&&(q.enableLayer=!0),z&&(z.appendChild(U),U.style.width="100%",W=U.getContext("2d"),setInterval((function(){me()}),500),window.addEventListener("resize",me),t.editor&&ye())}function ye(){U.addEventListener("mousedown",Ie),U.addEventListener("mouseup",be),U.addEventListener("mousemove",xe)}function he(){q.enableLayer=!0}function ve(){q.enableRotation=!0}function ge(){U.removeEventListener("mousedown",Ie),U.removeEventListener("mouseup",be),U.removeEventListener("mousemove",xe)}function Ie(e){var t=g(e,U,C),r=null;re().includes(0)&&(r=1),!r&&re().includes(1)&&(r=0),T=function(e,t,r,o,n,i,a,c){return 1===c||0===c?v(e,t,r,o,n[c],c,i,a):v(e,t,r,o,n[1],1,i,a)||v(e,t,r,o,n[0],0,i,a)||{itemId:null}}(t.x,t.y,D,_,F,C,V,r)}function be(){var e;T={itemId:null},(e=F)[0].coordinates.x1>e[0].coordinates.x2&&S(e[0].coordinates,"x1","x2"),e[0].coordinates.y1>e[0].coordinates.y2&&S(e[0].coordinates,"y1","y2"),e[1].coordinates.x1>e[1].coordinates.x2&&S(e[1].coordinates,"x1","x2"),e[1].coordinates.y1>e[1].coordinates.y2&&S(e[1].coordinates,"y1","y2")}function xe(e){M(e,F,T,U,z,D,_,k,N,C,V,le,re)}window.initASV=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fe(e),{getCoordinates:ne,loadImagesAndRender:ue,coordinatesChanged:ae,enableEditing:ye,disableEditing:ge,render:le,setItem1ImgUrl:ee,setLoading:ce,setOverlayType:se,setOverlayOpacity:de,setCoordinates:ie,setItem2ImgUrl:te,setVehicleImageUrl:G,setVehicleScale:H,setZoom:Z,enableRotation:ve,setRotationItem1:J,setRotationItem2:K,enableLayer:he,setItem1Layer:Q,setItem2Layer:$}}}]);